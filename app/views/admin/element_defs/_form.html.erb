<% position_options = options_from_collection_for_select(
        [ElementDef.new(name: 'None (First)', index: 0)] +
                element_def.metadata_profile.element_defs.order(:index),
        :index, :label, selected: element_def.index ? element_def.index - 1 : 0) %>

<%= form_for([:admin, element_def], remote: true) do |f| %>
  <div class="pt-error-messages">
    <% # populated via ajax by shared/_validation_messages.js.erb
    %>
  </div>

  <div class="form-group">
    <%= f.label :name %>
    <%= f.text_field :name, class: 'form-control' %>
  </div>

  <div class="form-group">
    <%= f.label :label %>
    <%= f.text_field :label, class: 'form-control' %>
  </div>

  <div class="form-group">
    <%= f.label :index, 'Position After' %>
    <%= f.select :index, position_options, {}, class: 'form-control' %>
  </div>

  <div class="form-group">
    <%= f.label :facet_def_id, 'Facet' %>
    <%= f.select(:facet_def_id,
                 options_for_select(FacetDef.order(:name).map{ |f| [f.name, f.id] },
                                    selected: f.object.facet_def_id),
                 { include_blank: 'None' }, { class: 'form-control' }) %>
  </div>

  <div class="form-group">
    <%= f.label :facet_def_label, 'Facet Label' %>
    <%= f.text_field :facet_def_label, class: 'form-control' %>
  </div>

  <div class="checkbox">
    <label>
      <%= f.check_box :visible %>
      Visible
    </label>
  </div>

  <div class="checkbox">
    <label>
      <%= f.check_box :searchable %>
      Searchable
    </label>
  </div>

  <%= f.hidden_field :metadata_profile_id, value: metadata_profile.id %>

  <div class="clearfix">
    <div class="pull-right">
      <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
      <%= f.submit(context == :new ? 'Create Element' : 'Edit Element',
                   class: 'btn btn-primary') %>
    </div>
  </div>
<% end %>
