<div class="modal fade" id="pt-migrate-modal" tabindex="-1" role="dialog"
     aria-labelledby="pt-migrate-modal-label">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <%= form_tag(admin_collection_items_migrate_metadata_path(@collection)) do %>
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span></button>
          <h4 class="modal-title" id="pt-migrate-modal-label">Migrate Element Values</h4>
        </div>
        <div class="modal-body">
          <div class="alert alert-warning">
            <i class="fa fa-exclamation-triangle"></i> This cannot be undone.
          </div>

          <% if @collection.metadata_profile %>
            <% defs = @collection.metadata_profile.elements.
                sort{ |a, b| a.label <=> b.label }.
                map{ |t| [ "#{t.label} (#{t.name})", t.name ] } %>
            <div class="form-group">
              <label for="source_element">Source Element</label>
              <%= select_tag(:source_element, options_for_select(defs),
                             class: 'form-control') %>
            </div>
            <div class="form-group">
              <label for="destination_element">Destination Element</label>
              <%= select_tag(:dest_element, options_for_select(defs),
                             class: 'form-control') %>
            </div>
          <% else %>
            <p>Metadata profile is not set.</p>
          <% end %>

          <div class="pt-query">
            <% # will be populated by index.js.erb %>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
          <button type="submit" class="btn btn-primary">Migrate</button>
        </div>
      <% end %>
    </div>
  </div>
</div>