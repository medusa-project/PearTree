<% provide :title, 'Collections' %>
<% provide :body_id, 'collections_index' %>
<% provide :active_nav, 'entities' %>

<ol class="breadcrumb">
  <li><%= link_to 'Home', admin_root_path %></li>
  <li class="active">Collections</li>
</ol>

<div class="pull-right">
  <%= link_to admin_collections_refresh_path, method: 'patch', class: 'btn btn-default' do %>
    <i class="fa fa-refresh"></i> Refresh
  <% end %>
</div>

<h1>Collections <small><%= @collections.select(&:published).length %> published</small></h1>

<table class="table table-striped">
  <thead>
    <th>Collection</th>
    <th>Published</th>
    <th>Published in DLS</th>
    <th>Metadata Profile</th>
    <th>Theme</th>
  </thead>
  <tbody>
    <% @collections.each do |collection| %>
      <tr>
        <td><%= link_to collection.title, admin_collection_path(collection) %></td>
        <td class="text-center <%= collection.published ? 'bg-success' : 'bg-danger' %>">
            <%= boolean(collection.published) %>
        </td>
        <td class="text-center <%= collection.published_in_dls ? 'bg-success' : 'bg-danger' %>">
          <%= boolean(collection.published_in_dls) %>
        </td>
        <td><%= collection.collection_def.metadata_profile.name %></td>
        <td><%= collection.collection_def.theme ? collection.collection_def.theme.name :
                    "Default (#{Theme.default.name})" %></td>
      </tr>
    <% end %>
  </tbody>
</table>
