<%= form_for([:admin, @user]) do |f| %>

  <%= render 'shared/error_messages', object: f.object %>

  <div class="form-group">
    <%= f.label :username, 'Username' %>
    <%= f.text_field :username, class: 'form-control',
                     disabled: (context == :edit) %>
  </div>

  <div class="form-group">
    <div class="checkbox">
      <%= f.label :enabled do %>
        <%= f.check_box :enabled %> Enabled
      <% end %>
    </div>
  </div>

  <div class="form-group">
    <div class="checkbox">
      <%= f.label :human do %>
        <%= f.check_box :human %> Human
      <% end %>
    </div>
  </div>

  <div class="form-group">
    <label>Roles</label>
    <%= hidden_field_tag 'user[role_ids][]', nil %>
    <% @roles.each do |role| %>
      <div class="checkbox">
        <%= label_tag do %>
          <%= check_box_tag :role_ids, role.id, @user.roles.include?(role),
                            name: 'user[role_ids][]' %> <%= role.name %>
        <% end %>
      </div>
    <% end %>
  </div>

  <div class="float-right">
    <%= f.submit(context == :new ? 'Create User' : 'Save Changes',
                 class: 'btn btn-primary') %>
  </div>

<% end %>