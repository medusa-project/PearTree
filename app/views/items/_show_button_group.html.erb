<%
  # Requires the following locals:
  # item [Item]
%>

<div id="item-show-buttons" class="btn-group pull-right" role="group">
  <button class="btn btn-danger pt-remove-from-favorites"
          data-item-id="<%= item.repository_id %>">
    <i class="fa fa-heart-o"></i> Remove From Favorites
  </button>

  <button class="btn btn-default pt-add-to-favorites"
          data-item-id="<%= item.repository_id %>">
    <i class="fa fa-heart"></i> Add To Favorites
  </button>

  <%= share_button(item) %>

  <div class="btn-group">
    <button type="button" class="btn btn-default dropdown-toggle"
            data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
      <i class="fa fa-eye"></i>
      View <span class="caret"></span>
    </button>
    <ul class="dropdown-menu dropdown-menu-right" role="menu">
      <li>
        <%= link_to @permitted_params.merge(format: :atom), target: '_blank' do %>
          <i class="fa fa-rss"></i>&nbsp;&nbsp;Atom
        <% end %>
      </li>
      <li>
        <%= link_to @permitted_params.merge(format: :json), target: '_blank' do %>
          <i class="fa fa-code"></i>&nbsp;JSON
        <% end %>
      </li>
      <% if item.has_iiif_manifest? %>
        <li>
          <%= link_to item_iiif_manifest_path(item), target: '_blank' do %>
            <i class="fa fa-code"></i>&nbsp;IIIF Presentation Manifest
          <% end %>
        </li>
      <% end %>
      <% if item.bib_id.present? %>
        <li>
          <%= link_to item.catalog_record_url, target: '_blank' do %>
            <i class="fa fa-book"></i>&nbsp;&nbsp;Library Catalog Record
          <% end %>
        </li>
      <% end %>
      <% if item.collection.physical_collection_url.present? %>
        <li>
          <%= link_to item.collection.physical_collection_url,
                      target: '_blank' do %>
            <%= icon_for(item.collection) %>&nbsp;&nbsp;Physical Collection
          <% end %>
        </li>
      <% end %>
      <li class="divider"></li>
      <li>
        <%= link_to admin_collection_item_path(item.collection, item),
                    target: '_blank' do %>
          <i class="fa fa-lock"></i>&nbsp;&nbsp;Admin View
        <% end %>
      </li>
      <% if signed_in? %>
        <li>
          <%= link_to(edit_admin_collection_item_path(item.collection, item) + '#pt-metadata',
                      target: '_blank') do %>
            <i class="fa fa-pencil"></i> Edit
          <% end %>
        </li>
      <% end %>
    </ul>
  </div>

  <%= render partial: 'email_curator_button', locals: { item: item } %>

</div>
