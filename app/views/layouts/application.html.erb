<!DOCTYPE html>
<html>
  <head>
    <title><%= yield :title %> |
      <%= Option.string(Option::Key::WEBSITE_NAME) %></title>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="copyright" content="<%= Option.string(Option::Key::COPYRIGHT_STATEMENT) %>">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <%= csrf_meta_tags %>
    <%= favicon_link_tag %>

    <%= stylesheet_link_tag    'application', media: 'all' %>
    <%= javascript_include_tag 'application' %>

    <!--[if lt IE 9]>
    <script src="https://raw.githubusercontent.com/aFarkas/html5shiv/master/src/html5shiv.js"></script>
    <![endif]-->
  </head>
  <body <%= !yield(:body_id).empty? ? raw("id=\"#{yield(:body_id)}\"") : nil %>
        <%= raw("data-nav=\"#{yield(:active_nav)}\"") %>>

    <%= hidden_field_tag('pt-root-path', root_path) %>
    <%= hidden_field_tag('pt-root-url', root_url) %>
    <%= hidden_field_tag('pt-current-path', request.fullpath) %>

    <%= render 'layouts/header' %>

    <div class="container-fluid">
      <% if Option::string(Option::Key::SERVER_STATUS) != 'online' %>
        <div class="pt-flash alert alert-warning">
          <i class="fa fa-warning"></i>
          <%= Option::string(Option::Key::SERVER_STATUS_MESSAGE) %>
        </div>
      <% end %>

      <% flash.each do |type, message| %>
        <div class="pt-flash alert alert-dismissable <%= bootstrap_class_for(type) %>">
          <button type="button" class="close" data-dismiss="alert"
                  aria-hidden="true">&times;</button>
          <%= message %>
        </div>
      <% end %>

      <div id="pt-page-content">
        <%= yield.force_encoding(Encoding::UTF_8) %>
      </div>
    </div>

    <%= render 'layouts/footer' %>

    <!-- Google Analytics -->
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
              (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-45045308-2', 'auto');
      ga('send', 'pageview');
    </script>

  </body>
</html>
