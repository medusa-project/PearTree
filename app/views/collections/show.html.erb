<% provide :title, @collection.title %>
<% provide :body_id, 'collections_show' %>
<% provide :active_nav, 'collections' %>

<%= breadcrumb(collection: @collection) %>

<div class="btn-group pull-right" role="group">
  <div class="btn-group">
    <button type="button" class="btn btn-default dropdown-toggle"
            data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
      <i class="fa fa-eye"></i>
      View <span class="caret"></span>
    </button>
    <ul class="dropdown-menu dropdown-menu-right" role="menu">
      <li>
        <%= link_to params.merge(format: :json), target: '_blank' do %>
          <i class="fa fa-code"></i>&nbsp;JSON
        <% end %>
      </li>
      <li class="divider"></li>
      <li>
        <%= link_to admin_collection_path(@collection), target: '_blank' do %>
          <i class="fa fa-lock"></i>&nbsp;&nbsp;Admin View
        <% end %>
      </li>

      <% if Rails.env.development? %>
        <li class="divider"></li>
        <li>
          <%= link_to("https://kumquat-dev.library.illinois.edu/collections/#{@collection.repository_id}",
                      target: '_blank') do %>
            <i class="fa fa-lock"></i>&nbsp;&nbsp;Staging
          <% end %>
        </li>
        <li>
          <%= link_to("https://kumquat-dev.library.illinois.edu/admin/collections/#{@collection.repository_id}",
                      target: '_blank') do %>
            <i class="fa fa-lock"></i>&nbsp;&nbsp;Staging Admin
          <% end %>
        </li>
        <li>
          <%= link_to("https://digital.library.illinois.edu/collections/#{@collection.repository_id}",
                      target: '_blank') do %>
            <i class="fa fa-lock"></i>&nbsp;&nbsp;Production
          <% end %>
        </li>
        <li>
          <%= link_to("https://digital.library.illinois.edu/admin/collections/#{@collection.repository_id}",
                      target: '_blank') do %>
            <i class="fa fa-lock"></i>&nbsp;&nbsp;Production Admin
          <% end %>
        </li>
      <% end %>
    </ul>
  </div>
</div>

<h1><%= collection_page_title(@collection) %></h1>

<% if @representative_image_bytestream %>
  <div class="row">
    <div class="col-sm-6 col-md-7 col-lg-8">
      <%= render partial: 'description' %>
    </div>
    <div class="col-sm-6 col-md-5 col-lg-4">
      <div class="pt-main-image">
        <% if @representative_image_bytestream.item %>
          <%= link_to @representative_image_bytestream.item do %>
            <%= thumbnail_tag(@representative_image_bytestream, 512) %>
          <% end %>
          <%= link_to @representative_image_bytestream.item, class: 'pt-title' do %>
            <%= @representative_image_bytestream.item.title %>
          <% end %>
        <% else %>
          <%= thumbnail_tag(@representative_image_bytestream, 512) %>
        <% end %>
      </div>
    </div>
  </div>
<% else %>
  <%= render partial: 'description' %>
<% end %>

<% if @collection.children.count > 0 %>
  <hr>
  <h2>Subcollections</h2>
  <div class="pt-cards">
    <%= collections_as_cards(@collection.children.where(published: true)) %>
  </div>
<% end %>
